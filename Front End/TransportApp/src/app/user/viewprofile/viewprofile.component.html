<div class="container">
  <section class="h-100">
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col col-lg-9 col-xl-7">
          <div class="rounded-top text-white d-flex flex-row profile-card-header"
            style="height:200px; background-color: black;">
            <div class="ms-4 mt-5 d-flex flex-column">
              <img [src]="createImgPath(currentUser.profilePicture)" alt="Profile image"
                class="profile-avatar img-thumbnail rounded-circle mt-4 mb-2"
                style="width: 150px; height: 150px; object-fit: cover;">
              <!-- Edit profile info -->
              <button routerLink="edit" type="button" class="btn btn-sm btn-outline-dark" data-mdb-ripple-color="dark"
                style="z-index: 1" id="edit">
                Edit profile
              </button>

              <!-- Access admin functions (route guarded) -->
              <button *ngIf="currentUser.isAdmin" class="btn btn-sm btn-dark mt-2" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#offcanvasAdmin" aria-controls="offcanvasAdmin"
                data-mdb-ripple-color="dark" style="z-index: 1" id="admin">
                Admin functions
              </button>

              <div class="offcanvas offcanvas-start bg-dark text-light" data-bs-scroll="true" tabindex="-1"
                id="offcanvasAdmin" aria-labelledby="offcanvasAdminLabel">
                <div class="offcanvas-header">
                  <h4 class="offcanvas-title" id="offcanvasAdminLabel"><b>Access admin functions</b></h4>
                  <button type="button" class="btn-close text-light" data-bs-dismiss="offcanvas"
                    aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                  <div class="row">
                    <a class="text-light" style="text-decoration: none; font-size: larger;" routerLink="../admin">
                      <i class="fa-solid fa-list-check text-light"></i>
                      Manage users
                    </a>
                  </div>
                </div>
              </div>

            </div>
          </div>

          <!-- Display for user's current profile information -->
          <div class="card-body p-4 text-black" style="margin-top: 100px;">
            <div class="col-lg-12">
              <div class="card mb-4">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-4">
                      <p class="mb-0">Full name</p>
                    </div>
                    <div class="col-sm-8">
                      <p class="text-muted mb-0">{{currentUser.firstName}} {{currentUser.lastName}}</p>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-4">
                      <p class="mb-0">Email</p>
                    </div>
                    <div class="col-sm-8">
                      <p class="text-muted mb-0">{{currentUser.email}}</p>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-4">
                      <p class="mb-0">Date of birth</p>
                    </div>
                    <div class="col-sm-8">
                      <p class="text-muted mb-0">{{currentUser.dateOfBirth | date }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Separate button to start Change Password user flow -->
          <div class="row">
            <button routerLink="change-password" type="button" class="btn btn-dark col-4 offset-4 mb-5"
              data-mdb-ripple-color="dark" style="z-index: 1" id="changepassword">
              Change password
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<div *ngIf="isLoading" class="spinner"></div>
<div *ngIf="isLoading" class="spinner-image"></div>